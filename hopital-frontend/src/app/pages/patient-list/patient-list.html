<ng-container *ngIf="patientsState$ | async as state">
  
    <h2>Liste des patients</h2>
    
    <div style="margin-bottom: 20px;">
        <a routerLink="/patients/add" class="btn btn-primary">Ajouter un nouveau patient</a>
    </div>

    <div *ngIf="state.loading" class="loading-spinner">
        Chargement des données...
    </div>

    <div *ngIf="state.error" class="alert alert-danger">
        {{ state.error }}
    </div>

    <table *ngIf="!state.loading && state.patients.length > 0">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Date de naissance</th>
                <th>Téléphone</th>
                <th>Adresse</th>
                <th style="text-align: center;">Actions</th> 
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let p of state.patients">
                <td><strong>#{{ p.id }}</strong></td>
                <td>{{ p.nom }}</td>
                <td>{{ p.prenom }}</td>
                <td>{{ p.dateNaissance }}</td>
                <td>{{ p.telephone }}</td>
                <td>{{ p.adresse }}</td>
                <td style="text-align: center;">
                <div class="action-buttons">
                    <a [routerLink]="['/patients/edit', p.id]" class="btn btn-edit">
                    <i class="fas fa-edit"></i>
                    Modifier
                    </a>
                    <button (click)="deletePatient(p.id!)" class="btn btn-delete">
                    <i class="fas fa-trash-alt"></i>
                    Supprimer
                    </button>
                </div>
                </td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="!state.loading && !state.error && state.patients.length === 0" style="padding: 20px; color: #7f8c8d;">
        Aucun patient trouvé dans la base de données.
    </div>

</ng-container>