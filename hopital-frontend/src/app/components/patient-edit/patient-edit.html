<div *ngIf="!patientExiste" style="text-align: center; margin-top: 50px;">
    <h1 style="color: #7c0c00;">404 - Patient introuvable</h1>
    <p>Le patient avec l'ID #{{ patientId }} n'existe pas dans notre base de données.</p>
    <button (click)="router.navigate(['/patients'])">Retour à la liste des patients</button>
</div>

<ng-container *ngIf="patientExiste">
    
    <div *ngIf="loading">Chargement des données du patient...</div>

    <h2>Modifier Patient #{{ patientId }}</h2>

    <div class="patient-form-container">
        <form [formGroup]="patientForm" (ngSubmit)="onSubmit()">

            <div class="form-group">
                <label for="nom">Nom :</label>
                <input id="nom" type="text" formControlName="nom">
                <div *ngIf="f['nom'].touched && f['nom'].invalid" class="alert-error">
                    <div *ngIf="f['nom'].errors?.['required']">Le nom est obligatoire.</div>
                </div>
            </div>

            <div class="form-group">
                <label for="prenom">Prénom :</label>
                <input id="prenom" type="text" formControlName="prenom">
                <div *ngIf="f['prenom'].touched && f['prenom'].invalid" class="alert-error">
                    <div *ngIf="f['prenom'].errors?.['required']">Le prénom est obligatoire.</div>
                </div>
            </div>

            <div class="form-group">
                <label for="dateNaissance">Date de Naissance :</label>
                <input id="dateNaissance" type="date" formControlName="dateNaissance">
                <div *ngIf="f['dateNaissance'].touched && f['dateNaissance'].invalid" class="alert-error">
                    <div *ngIf="f['dateNaissance'].errors?.['required']">La date de naissance est obligatoire.</div>
                </div>
            </div>

            <div class="form-group">
                <label for="telephone">Téléphone :</label>
                <input id="telephone" type="tel" formControlName="telephone">
                <div *ngIf="f['telephone'].touched && f['telephone'].invalid" class="alert-error">
                    <div *ngIf="f['telephone'].errors?.['required']">Le téléphone est obligatoire.</div>
                    <div *ngIf="f['telephone'].errors?.['pattern']">Le format du téléphone est invalide.</div>
                </div>
            </div>

            <div class="form-group">
                <label for="adresse">Adresse :</label>
                <input id="adresse" type="text" formControlName="adresse">
                <div *ngIf="f['adresse'].touched && f['adresse'].invalid" class="alert-error">
                    <div *ngIf="f['adresse'].errors?.['required']">L'adresse est obligatoire.</div>
                </div>
            </div>

            <div *ngIf="errorMessage" class="alert-error server-error">
                {{ errorMessage }}
            </div>

            <div class="form-actions">
                <button type="submit" [disabled]="patientForm.invalid">Enregistrer les modifications</button>
                <button type="button" (click)="router.navigate(['/patients'])">Annuler</button>
            </div>
        </form>
    </div>
</ng-container>